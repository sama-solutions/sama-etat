<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Template pour la page publique du membre -->
    <template id="member_public_page" name="Page Publique Membre">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure oe_empty">
                <div class="container mt-5">
                    <div class="row justify-content-center">
                        <div class="col-md-8 col-lg-6">
                            <!-- Carte de membre stylisée -->
                            <div class="member-card-container">
                                <style>
                                    .member-card-container {
                                        background: linear-gradient(135deg, #004a99 0%, #2d7a7d 100%);
                                        border-radius: 20px;
                                        padding: 30px;
                                        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
                                        color: white;
                                        position: relative;
                                        overflow: hidden;
                                    }
                                    .member-card-container::before {
                                        content: '';
                                        position: absolute;
                                        top: -50%;
                                        right: -50%;
                                        width: 100%;
                                        height: 100%;
                                        background: rgba(247, 243, 45, 0.1);
                                        border-radius: 50%;
                                        z-index: 1;
                                    }
                                    .card-content {
                                        position: relative;
                                        z-index: 2;
                                    }
                                    .member-photo {
                                        width: 120px;
                                        height: 120px;
                                        border-radius: 50%;
                                        object-fit: cover;
                                        border: 4px solid white;
                                        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                                        margin: 0 auto 20px;
                                        display: block;
                                    }
                                    .member-name {
                                        font-size: 2rem;
                                        font-weight: 700;
                                        text-align: center;
                                        margin-bottom: 10px;
                                        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
                                    }
                                    .member-number {
                                        background: #f7f32d;
                                        color: #333;
                                        padding: 10px 20px;
                                        border-radius: 25px;
                                        font-weight: 700;
                                        text-align: center;
                                        margin: 20px 0;
                                        font-size: 1.2rem;
                                    }
                                    .validity-status {
                                        text-align: center;
                                        margin-top: 20px;
                                        padding: 15px;
                                        border-radius: 10px;
                                        font-weight: 600;
                                    }
                                    .status-valid {
                                        background: rgba(40, 167, 69, 0.2);
                                        border: 2px solid #28a745;
                                    }
                                    .status-expired {
                                        background: rgba(220, 53, 69, 0.2);
                                        border: 2px solid #dc3545;
                                    }
                                    .company-info {
                                        text-align: center;
                                        margin-top: 30px;
                                        padding-top: 20px;
                                        border-top: 1px solid rgba(255,255,255,0.3);
                                    }
                                    .company-logo {
                                        max-height: 60px;
                                        margin-bottom: 10px;
                                    }
                                    .back-link {
                                        text-align: center;
                                        margin-top: 30px;
                                    }
                                    .back-link a {
                                        color: #f7f32d;
                                        text-decoration: none;
                                        font-weight: 600;
                                    }
                                    .back-link a:hover {
                                        text-decoration: underline;
                                    }
                                    @media (max-width: 768px) {
                                        .member-card-container {
                                            margin: 20px;
                                            padding: 20px;
                                        }
                                        .member-name {
                                            font-size: 1.5rem;
                                        }
                                        .member-photo {
                                            width: 100px;
                                            height: 100px;
                                        }
                                    }
                                </style>
                                
                                <div class="card-content">
                                    <!-- Photo du membre -->
                                    <img t-if="member.image_1920" 
                                         t-att-src="image_data_uri(member.image_1920)" 
                                         class="member-photo" 
                                         alt="Photo du membre"/>
                                    <img t-else="" 
                                         src="/web/static/src/img/placeholder.png" 
                                         class="member-photo" 
                                         alt="Pas de photo"/>
                                    
                                    <!-- Nom du membre -->
                                    <h1 class="member-name" t-field="member.name"/>
                                    
                                    <!-- Numéro de membre -->
                                    <div class="member-number">
                                        Membre N° <span t-field="member.membership_number"/>
                                    </div>
                                    
                                    <!-- Statut de validité -->
                                    <div t-if="is_valid" class="validity-status status-valid">
                                        <i class="fa fa-check-circle fa-2x mb-2"></i><br/>
                                        <strong>Carte Valide</strong><br/>
                                        Expire le <span t-field="member.expiration_date" t-options="{'widget': 'date'}"/>
                                    </div>
                                    <div t-else="" class="validity-status status-expired">
                                        <i class="fa fa-times-circle fa-2x mb-2"></i><br/>
                                        <strong>Carte Expirée</strong><br/>
                                        Expirée le <span t-field="member.expiration_date" t-options="{'widget': 'date'}"/>
                                    </div>
                                    
                                    <!-- Informations de l'organisation -->
                                    <div class="company-info">
                                        <img t-if="company.logo" 
                                             t-att-src="image_data_uri(company.logo)" 
                                             class="company-logo" 
                                             alt="Logo organisation"/>
                                        <div>
                                            <strong t-field="company.name"/>
                                        </div>
                                        <div t-if="company.website">
                                            <a t-att-href="company.website" target="_blank" style="color: #f7f32d;">
                                                <t t-esc="company.website"/>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Termes et conditions -->
                            <div class="mt-4 p-3" style="background: #f8f9fa; border-radius: 10px;">
                                <h5 class="text-center mb-3">Conditions d'utilisation</h5>
                                <p class="text-muted small text-justify" t-field="member.terms_and_conditions"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <!-- Template pour membre non trouvé -->
    <template id="member_not_found" name="Membre Non Trouvé">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure oe_empty">
                <div class="container mt-5">
                    <div class="row justify-content-center">
                        <div class="col-md-6 text-center">
                            <div class="alert alert-warning">
                                <i class="fa fa-exclamation-triangle fa-3x mb-3"></i>
                                <h3>Carte non trouvée</h3>
                                <p>Le lien que vous avez suivi ne correspond à aucune carte de membre valide.</p>
                                <p class="text-muted">Veuillez vérifier le QR code ou contacter l'organisation.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>