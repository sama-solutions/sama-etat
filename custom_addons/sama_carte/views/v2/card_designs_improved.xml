<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- 
    ================================================================
    DESIGNS AMÉLIORÉS V2.1 - SAMA_CARTE
    Versions améliorées avec animations, responsive et effets visuels
    ================================================================
    -->

    <!-- DESIGN 1 AMÉLIORÉ: Moderne & Épuré -->
    <template id="design_modern_layout" name="Design Moderne Amélioré">
        <section class="modern-card-section" t-attf-style="background: linear-gradient(135deg, #{company.secondary_color or '#f8f9fa'} 0%, #{company.secondary_color or '#e9ecef'} 100%); min-height: 100vh; display: flex; align-items: center;">
            <style>
                .modern-card-section {
                    position: relative;
                    overflow: hidden;
                }
                .modern-card-section::before {
                    content: '';
                    position: absolute;
                    top: -50%;
                    right: -50%;
                    width: 200%;
                    height: 200%;
                    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
                    animation: float 6s ease-in-out infinite;
                }
                @keyframes float {
                    0%, 100% { transform: translateY(0px) rotate(0deg); }
                    50% { transform: translateY(-20px) rotate(180deg); }
                }
                .modern-member-photo {
                    transition: all 0.3s ease;
                    animation: fadeInUp 1s ease-out;
                }
                .modern-member-photo:hover {
                    transform: scale(1.05);
                    box-shadow: 0 20px 40px rgba(0,0,0,0.2);
                }
                .modern-member-name {
                    animation: fadeInUp 1s ease-out 0.2s both;
                    font-family: 'Inter', 'Segoe UI', sans-serif;
                    font-weight: 600;
                    letter-spacing: -0.02em;
                }
                .modern-member-number {
                    animation: fadeInUp 1s ease-out 0.4s both;
                    font-family: 'JetBrains Mono', monospace;
                    font-weight: 500;
                }
                .modern-status-badge {
                    animation: fadeInUp 1s ease-out 0.6s both;
                    transition: all 0.3s ease;
                    border-radius: 50px;
                    backdrop-filter: blur(10px);
                }
                .modern-status-badge:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
                }
                .modern-qr-code {
                    animation: fadeInUp 1s ease-out 0.8s both;
                    transition: all 0.3s ease;
                    border-radius: 15px;
                    padding: 10px;
                    background: white;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
                }
                .modern-qr-code:hover {
                    transform: scale(1.1);
                }
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                @media (max-width: 768px) {
                    .modern-member-photo {
                        width: 140px !important;
                        height: 140px !important;
                    }
                    .modern-member-name {
                        font-size: 1.8rem !important;
                    }
                }
            </style>
            
            <div class="container text-center position-relative">
                <img t-if="member.image_1920" 
                     t-att-src="'/web/image/membership.member/' + str(member.id) + '/image_1920'" 
                     class="modern-member-photo rounded-circle shadow-lg mb-4" 
                     style="width: 180px; height: 180px; object-fit: cover; border: 4px solid white;"/>
                <img t-else="" 
                     src="/web/static/src/img/placeholder.png" 
                     class="modern-member-photo rounded-circle shadow-lg mb-4" 
                     style="width: 180px; height: 180px; object-fit: cover; border: 4px solid white;"/>
                
                <h1 class="modern-member-name mb-3" t-esc="member.name" t-attf-style="color: #{company.primary_color or '#212529'}; font-size: 2.5rem;"/>
                <p class="modern-member-number text-muted fs-5 mb-4" t-esc="member.membership_number"/>
                
                <div t-if="is_valid" class="modern-status-badge badge fs-6 p-3 mb-4" style="background: linear-gradient(135deg, #198754, #20c997); color: white; border: none;">
                    <i class="fa fa-check me-2"/>MEMBRE VALIDE
                </div>
                <div t-else="" class="modern-status-badge badge fs-6 p-3 mb-4" style="background: linear-gradient(135deg, #dc3545, #fd7e14); color: white; border: none;">
                    <i class="fa fa-times me-2"/>CARTE EXPIRÉE
                </div>
                
                <p class="mt-3 text-muted">Expire le : <span t-esc="member.expiration_date.strftime('%d/%m/%Y')" class="fw-bold"/></p>
                
                <!-- QR Code amélioré -->
                <div class="mt-4">
                    <img t-if="member.barcode_qr" 
                         t-att-src="'data:image/png;base64,' + member.barcode_qr.decode('utf-8')" 
                         class="modern-qr-code"
                         style="width: 100px; height: 100px;"/>
                </div>
            </div>
        </section>
    </template>

    <!-- DESIGN 2 AMÉLIORÉ: Prestige & Doré -->
    <template id="design_prestige_layout" name="Design Prestige Amélioré">
        <div class="prestige-card-container" t-attf-style="background: linear-gradient(135deg, #{company.primary_color or '#1a1a1a'} 0%, #{company.primary_color or '#2d2d2d'} 100%); color: #{company.text_color or '#fff'}; min-height: 100vh; position: relative; overflow: hidden;">
            <style>
                .prestige-card-container {
                    position: relative;
                }
                .prestige-card-container::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: 
                        radial-gradient(circle at 20% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%);
                    animation: shimmer 8s ease-in-out infinite;
                }
                @keyframes shimmer {
                    0%, 100% { opacity: 0.3; }
                    50% { opacity: 0.7; }
                }
                .prestige-photo {
                    position: relative;
                    animation: slideInLeft 1s ease-out;
                }
                .prestige-photo::after {
                    content: '';
                    position: absolute;
                    top: -5px;
                    left: -5px;
                    right: -5px;
                    bottom: -5px;
                    background: linear-gradient(45deg, #D4AF37, #FFD700, #D4AF37);
                    border-radius: 50%;
                    z-index: -1;
                    animation: rotate 3s linear infinite;
                }
                @keyframes rotate {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
                .prestige-content {
                    animation: slideInRight 1s ease-out;
                }
                .prestige-title {
                    font-family: 'Playfair Display', serif;
                    font-weight: 700;
                    background: linear-gradient(45deg, #D4AF37, #FFD700);
                    -webkit-background-clip: text;
                    -webkit-text-fill-color: transparent;
                    background-clip: text;
                    animation: glow 2s ease-in-out infinite alternate;
                }
                @keyframes glow {
                    from { filter: drop-shadow(0 0 5px rgba(212, 175, 55, 0.5)); }
                    to { filter: drop-shadow(0 0 20px rgba(212, 175, 55, 0.8)); }
                }
                .prestige-number {
                    font-family: 'Cinzel', serif;
                    font-weight: 600;
                    letter-spacing: 2px;
                }
                .prestige-status {
                    background: linear-gradient(135deg, rgba(212, 175, 55, 0.2), rgba(255, 215, 0, 0.3));
                    border: 2px solid;
                    border-image: linear-gradient(45deg, #D4AF37, #FFD700) 1;
                    backdrop-filter: blur(10px);
                    animation: pulse 2s ease-in-out infinite;
                }
                @keyframes pulse {
                    0%, 100% { transform: scale(1); }
                    50% { transform: scale(1.05); }
                }
                .prestige-qr {
                    border: 3px solid #D4AF37;
                    border-radius: 10px;
                    padding: 10px;
                    background: rgba(255, 255, 255, 0.1);
                    backdrop-filter: blur(5px);
                    animation: fadeIn 1s ease-out 1s both;
                }
                @keyframes slideInLeft {
                    from { transform: translateX(-100px); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideInRight {
                    from { transform: translateX(100px); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @media (max-width: 768px) {
                    .prestige-card-container .row {
                        flex-direction: column;
                    }
                    .prestige-photo {
                        margin-bottom: 2rem;
                    }
                }
            </style>
            
            <section class="d-flex align-items-center min-vh-100 position-relative" style="z-index: 1;">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-5 text-center prestige-photo">
                            <img t-if="member.image_1920" 
                                 t-att-src="'/web/image/membership.member/' + str(member.id) + '/image_1920'" 
                                 class="img-fluid rounded-circle" 
                                 style="width: 220px; height: 220px; object-fit: cover; position: relative; z-index: 2;"/>
                            <img t-else="" 
                                 src="/web/static/src/img/placeholder.png" 
                                 class="img-fluid rounded-circle" 
                                 style="width: 220px; height: 220px; object-fit: cover; position: relative; z-index: 2;"/>
                        </div>
                        <div class="col-lg-7 pt-4 pt-lg-0 prestige-content">
                            <h1 class="prestige-title border-bottom pb-3 mb-4" 
                                style="border-color: #D4AF37 !important; font-size: 3rem;" 
                                t-esc="member.name"/>
                            <h3 class="prestige-number mt-3 mb-4" 
                                t-attf-style="color: #{company.secondary_color or '#D4AF37'}; font-size: 1.5rem;" 
                                t-esc="member.membership_number"/>
                            
                            <div t-if="is_valid" class="prestige-status alert p-4 mt-4" 
                                 t-attf-style="color: #{company.secondary_color or '#D4AF37'};">
                                <i class="fa fa-crown me-3 fs-4"/> 
                                <span class="fs-5 fw-bold">MEMBRE PRIVILÉGIÉ</span>
                            </div>
                            <div t-else="" class="alert alert-secondary mt-4 p-4">
                                <i class="fa fa-exclamation-triangle me-3"/>
                                <span class="fs-5">STATUT SUSPENDU</span>
                            </div>
                            
                            <!-- QR Code Prestige -->
                            <div class="mt-5">
                                <img t-if="member.barcode_qr" 
                                     t-att-src="'data:image/png;base64,' + member.barcode_qr.decode('utf-8')" 
                                     class="prestige-qr"
                                     style="width: 90px; height: 90px;"/>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </template>

    <!-- DESIGN 3 AMÉLIORÉ: Corporate & Structuré -->
    <template id="design_corporate_layout" name="Design Corporate Amélioré">
        <section class="corporate-section bg-light py-5" style="min-height: 100vh;">
            <style>
                .corporate-card {
                    transition: all 0.3s ease;
                    animation: slideUp 0.8s ease-out;
                    background: white;
                    border-radius: 15px;
                    overflow: hidden;
                }
                .corporate-card:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
                }
                .corporate-header {
                    position: relative;
                    background: linear-gradient(135deg, var(--primary-color), var(--primary-color-dark));
                    overflow: hidden;
                }
                .corporate-header::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    right: 0;
                    width: 100px;
                    height: 100px;
                    background: rgba(255,255,255,0.1);
                    border-radius: 50%;
                    transform: translate(30px, -30px);
                }
                .corporate-logo {
                    animation: fadeIn 1s ease-out 0.5s both;
                    transition: all 0.3s ease;
                }
                .corporate-logo:hover {
                    transform: scale(1.1);
                }
                .corporate-company-name {
                    font-family: 'Roboto', sans-serif;
                    font-weight: 500;
                    letter-spacing: 1px;
                    animation: slideInLeft 0.8s ease-out 0.2s both;
                }
                .corporate-photo {
                    animation: zoomIn 0.8s ease-out 0.4s both;
                    transition: all 0.3s ease;
                }
                .corporate-photo:hover {
                    transform: scale(1.05);
                }
                .corporate-badge {
                    animation: bounceIn 0.8s ease-out 0.6s both;
                    transition: all 0.3s ease;
                    border-radius: 25px;
                    font-weight: 600;
                    letter-spacing: 0.5px;
                }
                .corporate-badge:hover {
                    transform: scale(1.1);
                }
                .corporate-info {
                    animation: slideInRight 0.8s ease-out 0.8s both;
                }
                .corporate-table {
                    font-family: 'Inter', sans-serif;
                }
                .corporate-table th {
                    color: #6c757d;
                    font-weight: 600;
                    font-size: 0.9rem;
                    text-transform: uppercase;
                    letter-spacing: 0.5px;
                }
                .corporate-table td {
                    font-weight: 500;
                    color: #495057;
                }
                .corporate-qr {
                    animation: rotateIn 0.8s ease-out 1s both;
                    transition: all 0.3s ease;
                    border-radius: 10px;
                    padding: 8px;
                    background: #f8f9fa;
                    border: 2px solid #e9ecef;
                }
                .corporate-qr:hover {
                    transform: rotate(5deg) scale(1.1);
                    border-color: var(--primary-color);
                }
                @keyframes slideUp {
                    from { transform: translateY(50px); opacity: 0; }
                    to { transform: translateY(0); opacity: 1; }
                }
                @keyframes slideInLeft {
                    from { transform: translateX(-30px); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideInRight {
                    from { transform: translateX(30px); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes zoomIn {
                    from { transform: scale(0.8); opacity: 0; }
                    to { transform: scale(1); opacity: 1; }
                }
                @keyframes bounceIn {
                    0% { transform: scale(0.3); opacity: 0; }
                    50% { transform: scale(1.05); }
                    70% { transform: scale(0.9); }
                    100% { transform: scale(1); opacity: 1; }
                }
                @keyframes rotateIn {
                    from { transform: rotate(-180deg) scale(0); opacity: 0; }
                    to { transform: rotate(0deg) scale(1); opacity: 1; }
                }
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @media (max-width: 768px) {
                    .corporate-card {
                        margin: 1rem;
                    }
                    .corporate-header {
                        text-align: center;
                    }
                    .corporate-logo {
                        margin-bottom: 1rem;
                    }
                }
            </style>
            
            <div class="container d-flex align-items-center justify-content-center" style="min-height: 100vh;">
                <div class="corporate-card shadow-lg border-0 w-100" style="max-width: 900px; --primary-color: #{company.primary_color or '#0d6efd'}; --primary-color-dark: #{company.primary_color or '#0b5ed7'};">
                    <div class="corporate-header text-white p-4 d-flex justify-content-between align-items-center">
                        <h4 class="corporate-company-name m-0" t-esc="company.name"/>
                        <img t-if="company.logo" 
                             t-att-src="'/web/image/res.company/' + str(company.id) + '/logo'" 
                             class="corporate-logo"
                             style="max-height: 50px;"/>
                    </div>
                    <div class="card-body p-5">
                        <div class="row align-items-center">
                            <div class="col-md-4 text-center">
                                <img t-if="member.image_1920" 
                                     t-att-src="'/web/image/membership.member/' + str(member.id) + '/image_1920'" 
                                     class="corporate-photo img-thumbnail rounded-circle mb-3" 
                                     style="width: 160px; height: 160px; object-fit: cover; border: 3px solid #e9ecef;"/>
                                <img t-else="" 
                                     src="/web/static/src/img/placeholder.png" 
                                     class="corporate-photo img-thumbnail rounded-circle mb-3" 
                                     style="width: 160px; height: 160px; object-fit: cover; border: 3px solid #e9ecef;"/>
                                
                                <div t-if="is_valid" class="corporate-badge badge p-3" 
                                     t-attf-style="background-color: #{company.primary_color or '#0d6efd'}; color: white;">
                                     <i class="fa fa-check-circle me-2"/>AUTORISÉ
                                </div>
                                <div t-else="" class="corporate-badge badge bg-secondary p-3">
                                    <i class="fa fa-times-circle me-2"/>EXPIRÉ
                                </div>
                            </div>
                            <div class="col-md-8 corporate-info">
                                <h2 class="mb-4" style="color: #2c3e50; font-weight: 600;" t-esc="member.name"/>
                                <table class="corporate-table table table-borderless">
                                    <tr>
                                        <th style="width: 200px;">Numéro de membre</th>
                                        <td class="fw-bold" t-esc="member.membership_number"/>
                                    </tr>
                                    <tr>
                                        <th>Date d'expiration</th>
                                        <td t-esc="member.expiration_date.strftime('%d/%m/%Y')"/>
                                    </tr>
                                    <tr>
                                        <th>Statut</th>
                                        <td>
                                            <span t-if="is_valid" class="text-success fw-bold">Actif</span>
                                            <span t-else="" class="text-danger fw-bold">Inactif</span>
                                        </td>
                                    </tr>
                                </table>
                                
                                <!-- QR Code Corporate -->
                                <div class="mt-4">
                                    <img t-if="member.barcode_qr" 
                                         t-att-src="'data:image/png;base64,' + member.barcode_qr.decode('utf-8')" 
                                         class="corporate-qr"
                                         style="width: 90px; height: 90px;"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </template>
</odoo>