#!/bin/bash

# Script pour afficher toutes les URLs publiques de SAMA SYNDICAT

echo "üåê URLS PUBLIQUES - SAMA SYNDICAT"
echo "================================="
echo ""

# Couleurs
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
CYAN='\033[0;36m'
PURPLE='\033[0;35m'
NC='\033[0m'

# Configuration
SERVER_URL="http://localhost:8070"
DATABASE="sama_syndicat_final_1756812346"

echo -e "${BLUE}üñ•Ô∏è CONFIGURATION SERVEUR${NC}"
echo "========================"
echo -e "URL Serveur: ${GREEN}$SERVER_URL${NC}"
echo -e "Base de donn√©es: ${GREEN}$DATABASE${NC}"
echo -e "Port: ${GREEN}8070${NC}"
echo ""

echo -e "${YELLOW}üìã URLS D'ADMINISTRATION${NC}"
echo "========================"
echo -e "${CYAN}üîê Connexion Admin:${NC}"
echo "   $SERVER_URL/web/login"
echo ""
echo -e "${CYAN}üìä Dashboard Principal:${NC}"
echo "   $SERVER_URL/web#action=&model=&view_type=&menu_id="
echo ""
echo -e "${CYAN}‚öôÔ∏è Configuration Modules:${NC}"
echo "   $SERVER_URL/web#action=&model=ir.module.module&view_type=kanban&menu_id="
echo ""

echo -e "${YELLOW}üè¢ URLS SAMA SYNDICAT - BACKEND${NC}"
echo "==============================="
echo -e "${CYAN}üìä Dashboard Syndicat:${NC}"
echo "   $SERVER_URL/web#action=&model=syndicat.dashboard&view_type=kanban&menu_id="
echo ""
echo -e "${CYAN}üë• Gestion Adh√©rents:${NC}"
echo "   $SERVER_URL/web#action=&model=syndicat.adherent&view_type=kanban&menu_id="
echo "   $SERVER_URL/web#action=&model=syndicat.adherent&view_type=list&menu_id="
echo "   $SERVER_URL/web#action=&model=syndicat.adherent&view_type=form&menu_id="
echo ""
echo -e "${CYAN}üí∞ Gestion Cotisations:${NC}"
echo "   $SERVER_URL/web#action=&model=syndicat.cotisation&view_type=list&menu_id="
echo "   $SERVER_URL/web#action=&model=syndicat.cotisation&view_type=form&menu_id="
echo ""
echo -e "${CYAN}üèõÔ∏è Assembl√©es G√©n√©rales:${NC}"
echo "   $SERVER_URL/web#action=&model=syndicat.assemblee&view_type=kanban&menu_id="
echo "   $SERVER_URL/web#action=&model=syndicat.assemblee&view_type=calendar&menu_id="
echo "   $SERVER_URL/web#action=&model=syndicat.assemblee&view_type=list&menu_id="
echo ""
echo -e "${CYAN}‚öñÔ∏è Revendications:${NC}"
echo "   $SERVER_URL/web#action=&model=syndicat.revendication&view_type=kanban&menu_id="
echo "   $SERVER_URL/web#action=&model=syndicat.revendication&view_type=list&menu_id="
echo ""
echo -e "${CYAN}üéØ Actions Syndicales:${NC}"
echo "   $SERVER_URL/web#action=&model=syndicat.action&view_type=kanban&menu_id="
echo "   $SERVER_URL/web#action=&model=syndicat.action&view_type=list&menu_id="
echo ""
echo -e "${CYAN}üéì Formations:${NC}"
echo "   $SERVER_URL/web#action=&model=syndicat.formation&view_type=kanban&menu_id="
echo "   $SERVER_URL/web#action=&model=syndicat.formation&view_type=list&menu_id="
echo ""
echo -e "${CYAN}ü§ù M√©diations:${NC}"
echo "   $SERVER_URL/web#action=&model=syndicat.mediation&view_type=list&menu_id="
echo "   $SERVER_URL/web#action=&model=syndicat.mediation&view_type=form&menu_id="
echo ""
echo -e "${CYAN}üì¢ Communications:${NC}"
echo "   $SERVER_URL/web#action=&model=syndicat.communication&view_type=kanban&menu_id="
echo "   $SERVER_URL/web#action=&model=syndicat.communication&view_type=list&menu_id="
echo ""
echo -e "${CYAN}üìÑ Conventions:${NC}"
echo "   $SERVER_URL/web#action=&model=syndicat.convention&view_type=list&menu_id="
echo "   $SERVER_URL/web#action=&model=syndicat.convention&view_type=form&menu_id="
echo ""

echo -e "${YELLOW}üåê URLS PUBLIQUES - FRONTEND${NC}"
echo "============================"
echo -e "${PURPLE}Note: Les URLs publiques n√©cessitent la configuration du module Website d'Odoo${NC}"
echo ""
echo -e "${CYAN}üè† Page d'Accueil Publique:${NC}"
echo "   $SERVER_URL/syndicat"
echo "   $SERVER_URL/syndicat/home"
echo ""
echo -e "${CYAN}‚ÑπÔ∏è √Ä Propos du Syndicat:${NC}"
echo "   $SERVER_URL/syndicat/about"
echo "   $SERVER_URL/syndicat/presentation"
echo ""
echo -e "${CYAN}üë• Adh√©sion en Ligne:${NC}"
echo "   $SERVER_URL/syndicat/adhesion"
echo "   $SERVER_URL/syndicat/rejoindre"
echo ""
echo -e "${CYAN}üì∞ Actualit√©s Publiques:${NC}"
echo "   $SERVER_URL/syndicat/actualites"
echo "   $SERVER_URL/syndicat/news"
echo ""
echo -e "${CYAN}üìû Contact:${NC}"
echo "   $SERVER_URL/syndicat/contact"
echo "   $SERVER_URL/syndicat/nous-contacter"
echo ""
echo -e "${CYAN}üìã Revendications Publiques:${NC}"
echo "   $SERVER_URL/syndicat/revendications"
echo "   $SERVER_URL/syndicat/nos-combats"
echo ""
echo -e "${CYAN}üéì Formations Ouvertes:${NC}"
echo "   $SERVER_URL/syndicat/formations"
echo "   $SERVER_URL/syndicat/formation-inscription"
echo ""

echo -e "${YELLOW}üîß URLS D'API ET SERVICES${NC}"
echo "========================="
echo -e "${CYAN}üìä API REST (si activ√©e):${NC}"
echo "   $SERVER_URL/api/v1/syndicat/adherents"
echo "   $SERVER_URL/api/v1/syndicat/cotisations"
echo "   $SERVER_URL/api/v1/syndicat/assemblees"
echo ""
echo -e "${CYAN}üì± Services JSON-RPC:${NC}"
echo "   $SERVER_URL/jsonrpc"
echo ""
echo -e "${CYAN}üîê Authentification OAuth:${NC}"
echo "   $SERVER_URL/oauth2/authorize"
echo "   $SERVER_URL/oauth2/token"
echo ""

echo -e "${YELLOW}üì± URLS MOBILES${NC}"
echo "==============="
echo -e "${CYAN}üì± Interface Mobile:${NC}"
echo "   $SERVER_URL/web/mobile"
echo ""
echo -e "${CYAN}üìä Dashboard Mobile:${NC}"
echo "   $SERVER_URL/web/mobile#action=&model=syndicat.dashboard"
echo ""

echo -e "${YELLOW}üõ†Ô∏è URLS DE D√âVELOPPEMENT${NC}"
echo "========================="
echo -e "${CYAN}üîç Mode Debug:${NC}"
echo "   $SERVER_URL/web?debug=1"
echo "   $SERVER_URL/web?debug=assets"
echo ""
echo -e "${CYAN}üìä M√©triques et Monitoring:${NC}"
echo "   $SERVER_URL/web/database/manager"
echo "   $SERVER_URL/web/database/selector"
echo ""
echo -e "${CYAN}üîß Configuration Technique:${NC}"
echo "   $SERVER_URL/web/webclient/version_info"
echo "   $SERVER_URL/web/session/get_session_info"
echo ""

echo -e "${YELLOW}üìã URLS SP√âCIFIQUES SAMA SYNDICAT${NC}"
echo "=================================="
echo -e "${CYAN}üéØ Actions Rapides:${NC}"
echo "   $SERVER_URL/web#action=syndicat_dashboard_action"
echo "   $SERVER_URL/web#action=syndicat_adherent_action"
echo "   $SERVER_URL/web#action=syndicat_cotisation_action"
echo ""
echo -e "${CYAN}üìä Rapports:${NC}"
echo "   $SERVER_URL/web#action=syndicat_rapport_adherents"
echo "   $SERVER_URL/web#action=syndicat_rapport_cotisations"
echo "   $SERVER_URL/web#action=syndicat_rapport_assemblees"
echo ""

echo -e "${YELLOW}üîó LIENS DIRECTS UTILES${NC}"
echo "======================="
echo -e "${CYAN}üöÄ D√©marrage Rapide:${NC}"
echo "   $SERVER_URL/web/login?db=$DATABASE"
echo ""
echo -e "${CYAN}üìä Dashboard Direct:${NC}"
echo "   $SERVER_URL/web?db=$DATABASE#action=&model=syndicat.dashboard&view_type=kanban"
echo ""
echo -e "${CYAN}üë• Adh√©rents Direct:${NC}"
echo "   $SERVER_URL/web?db=$DATABASE#action=&model=syndicat.adherent&view_type=kanban"
echo ""

echo ""
echo -e "${GREEN}‚úÖ V√âRIFICATION DE L'√âTAT DU SERVEUR${NC}"
echo "===================================="

# V√©rifier si le serveur est actif
if curl -s --connect-timeout 5 "$SERVER_URL" > /dev/null 2>&1; then
    echo -e "${GREEN}‚úÖ Serveur ACTIF${NC} - Toutes les URLs sont accessibles"
else
    echo -e "${YELLOW}‚ö†Ô∏è Serveur INACTIF${NC} - D√©marrer avec: ./start_sama_syndicat.sh"
fi

# V√©rifier le port
if lsof -i:8070 >/dev/null 2>&1; then
    echo -e "${GREEN}‚úÖ Port 8070 OUVERT${NC}"
else
    echo -e "${YELLOW}‚ö†Ô∏è Port 8070 FERM√â${NC}"
fi

echo ""
echo -e "${PURPLE}üìù NOTES IMPORTANTES:${NC}"
echo "====================="
echo "‚Ä¢ Les URLs publiques n√©cessitent le module Website d'Odoo"
echo "‚Ä¢ Certaines URLs peuvent n√©cessiter une authentification"
echo "‚Ä¢ Les URLs d'API n√©cessitent une configuration sp√©cifique"
echo "‚Ä¢ Utilisez ?debug=1 pour le mode d√©veloppement"
echo ""
echo -e "${GREEN}üéØ URL PRINCIPALE RECOMMAND√âE:${NC}"
echo -e "${CYAN}$SERVER_URL/web/login?db=$DATABASE${NC}"